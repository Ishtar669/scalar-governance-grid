from dataclasses import dataclass
from typing import Tuple

@dataclass(frozen=True)
class Clause:
    number: str
    title: str
    subtitle: str
    sections: Tuple[str, ...]

@dataclass(frozen=True)
class Codex:
    name: str
    version: str
    clauses: Tuple[Clause, ...]

def invoke_ctsa(codex: Codex, new_clause: Clause) -> Codex:
    """
    CTSA Invocation:
    Returns a new Codex state with the new_clause appended.
    No mutation. No side effects.
    """
    updated_clauses = codex.clauses + (new_clause,)
    return Codex(
        name=codex.name,
        version=codex.version + " + CTSA",
        clauses=updated_clauses
    )